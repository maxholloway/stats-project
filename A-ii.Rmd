---
title: "ii"
output: html_document
---

## Initialize data

```{r warning=FALSE}
if (!file.exists("2010_sqf_m35.csv")) {
  download.file("http://math.hmc.edu/m35f/2010_sqf_m35.csv", "2010_sqf_m35.csv")
}
if (!file.exists("2015_sqf_m35.csv")) {
  download.file("http://math.hmc.edu/m35f/2015_sqf_m35.csv", "2015_sqf_m35.csv")
}
sqf2010 <- read.csv("2010_sqf_m35.csv")
sqf2015 <- read.csv("2015_sqf_m35.csv")

sqf2015 = sqf2015[!sqf2015$perstop=="**"
                  & !sqf2015$perstop==" ",]
sqf2015$perstop = as.numeric(as.character(sqf2015$perstop))

sqf2010 <- subset(sqf2010, sqf2010$weight > 50 & sqf2010$weight < 400)
sqf2010 <- subset(sqf2010, sqf2010$age < 100)
```

## Set variables for the hypothesis tests
```{r}
bhair <- subset(sqf2015, sqf2015$haircolr == "BLACK") # people with black hair
pstop <- bhair$perstop # period of stop for people with black hair
mu_0 <- 7.9 # proposed value for the population mean from the problem
n <- length(pstop)
xbar <- mean(pstop, na.rm = TRUE) # sample mean
sdp <- sd(pstop) # point estimate for standard deviation of population
```


## Hypothesis Test: $\mu = \mu_0$

The null hypothesis is $H_0: \mu = \mu_0$, and the alternate hypothesis is $H_1: \mu > \mu_0$. 

We will first compute the test statistic, $z_{test}$.  
```{r}
z_test <- (xbar-mu_0)/(sdp/sqrt(n)) # z-score for mu being the true average of the population
```
```{r echo=FALSE}
print(z_test)
```


The critical value for us to reject the null hypothesis is found by the following code. 
```{r}
z_critical <- qnorm(0.95, mean=0, sd = 1)
```
```{r echo=FALSE}
print(z_critical)
```
Because $z_{test} > z_{critical}$, we can reject the null hypothesis with 95% confidence.

Additionally, we can compute the p-value with the following code.
```{r}
p_value <- pnorm(z_test, mean=0, sd = 1, lower.tail=FALSE)
```
```{r echo=FALSE}
print(p_value)
```

Because this p-value is significantly smaller than 0.05, we get the same result as the hypothesis test: reject the null hypothesis.

